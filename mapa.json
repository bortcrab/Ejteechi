// PRIMERO DEBEN CREAR UNA BASE DE DATOS LLAMADA "ejteechidb"

// Luego ejecutan todo de golpe en Studio 3T

db.rutas.insertMany([
    {
        "numero" : 1,
        "puntos" : [
            [27.48270, -109.95938],
            [27.48627, -109.96098],
            [27.48633, -109.96896],
            [27.48632, -109.97365],
            [27.48273, -109.97374],
            [27.48408, -109.98187],
            [27.48571, -109.98238],
            [27.48571, -109.98427],
            [27.48547, -109.99021],
            [27.48918, -109.98984],
            [27.4892, -109.98836],
            [27.4895, -109.98245],
            [27.48951, -109.97735],
            [27.49106, -109.97527],
            [27.49133, -109.97369],
            [27.49685, -109.9731],
            [27.49312, -109.96776],
            [27.4952, -109.96572],
            [27.49432, -109.96284],
            [27.49383, -109.95656],
            [27.48271, -109.95656]
        ]
    },
    {
        "numero" : 2,
        "puntos" : [
            [27.48265, -109.94684],
            [27.48278, -109.94365],
            [27.48767, -109.94365],
            [27.48768, -109.94651],
            [27.48648, -109.94649],
            [27.48632, -109.94881],
            [27.48276, -109.94874]
        ]
    }
])

var ruta1 = db.rutas.findOne({"numero" : 1}, {"_id" : 1});
var ruta2 = db.rutas.findOne({"numero" : 2}, {"_id" : 1});

db.lineas.insertMany([
    {
        "numero" : 1,
        "paradas" : [
            [27.48270, -109.95938],
            [27.48633, -109.96896],
            [27.48408, -109.98187],
            [27.48571, -109.98238],
            [27.48571, -109.98427],
            [27.48918, -109.98984],
            [27.4892, -109.98836],
            [27.4895, -109.98245],
            [27.49106, -109.97527],
            [27.49133, -109.97369],
            [27.49685, -109.9731],
            [27.49312, -109.96776],
            [27.49432, -109.96284],
            [27.49383, -109.95656],
            [27.48271, -109.95656]
        ],
        "ruta" : ruta1._id
    },
    {
        "numero" : 2,
        "paradas" : [
            [27.48265, -109.94684],
            [27.48278, -109.94365],
            [27.48767, -109.94365],
            [27.48768, -109.94651],
            [27.48648, -109.94649],
            [27.48632, -109.94881],
            [27.48276, -109.94874]
        ],
        "ruta" : ruta2._id
    }
])

// Obtenemos los ID de las l√≠neas.
var cursor = db.lineas.find({}, {"_id" : 1});

// Creamos un arreglo para almacenarlos.
var lineas_id = [];

// Iteramos sobre el cursor y vamos guardando los ID.
while (cursor.hasNext()) {
    var linea = cursor.next();
    lineas_id.push(linea._id);
}

console.log(lineas_id)

db.mapas.insertOne(
    {
        "coordenadas" : [27.4845523,-109.9237108],
        "lineas" : lineas_id
    }
)

db.mapas.find({})